{"version":3,"sources":["webpack:///./src/lib/components/FancyParallelCoordinatesD3.js"],"names":["FancyParallelCoordinatesD3","el","props","update","bind","margin","top","right","bottom","left","width","dataWidth","height","dimensions","data","map","label","parent","d3","append","style","svg","attr","scales","i","length","domain","range","xScale","padding","axes","selectAll","enter","d","each","call","scale","text","brush","extent","on","selections","Map","key","selection","set","invert","selected","foreground","active","Array","from","every","max","min","raise","push","dragging","position","v","event","y","__origin__","__dragged__","Math","dx","sort","a","b","transition","values","path","p"],"mappings":"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","file":"bfb74e4-main-wps-hmr.js","sourcesContent":["import * as d3 from 'd3'\n\nexport default class FancyParallelCoordinatesD3 {\n    constructor(el, props) {\n        this.update = this.update.bind(this);\n\n        var margin = {top: 30, right: 100, bottom: 50, left: 50}, width = props.dataWidth - margin.left - margin.right,\n            height = props.height - margin.top - margin.bottom;\n\n        var dimensions = props.data.map(({label}) => label);\n\n\n        this.parent = d3.select(el)\n            .append(\"div\")\n            .style(\"width\", props.width)\n            .style(\"overflow-x\", \"scroll\")\n            .style(\"-webkit-overflow-scrolling\", \"touch\");\n\n\n        this.svg = this.parent.append('svg')\n            .attr('width', width + margin.left + margin.right)\n            .attr('height', height + margin.top + margin.bottom)\n            .append('g')\n            .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        // Create axes for data\n        var scales = {}\n        for(let i = 0; i < dimensions.length; i++) {\n            scales[dimensions[i]] = d3.scaleLinear()\n                .domain(props.data[i].range)\n                .range([height, 0])\n        }\n\n        // Create x-axes to lay out the y-axes\n        var xScale = d3.scalePoint()\n            .range([0, width])\n            .padding(1)\n            .domain(dimensions);\n\n        // Draw the axes\n        var axes = this.svg.selectAll(\"myAxis\")\n            .data(dimensions).enter()\n            .append('g')\n            // move to right position\n            .attr(\"transform\", function(d) {return \"translate(\" + xScale(d) + \")\";})\n            // build axes\n            .each(function(d) {d3.select(this).call(d3.axisLeft().scale(scales[d]));});\n        axes\n            .append(\"text\")\n            .style(\"text-anchor\", \"middle\")\n            .attr(\"y\", -9)\n            .text(function(d) {return d;})\n\n        axes\n            .selectAll(\"path\")\n            .style(\"stroke\", \"red\");\n        axes\n            .selectAll(\"line\")\n            .style(\"stroke\", \"green\");\n        this.svg\n            .selectAll(\"text\")\n            .style(\"fill\", \"purple\");\n\n        // brushing\n        axes\n            .each(function(d) {\n                d3.select(this).call(scales[d].brush = d3.brushY()\n                    .extent([[-10, 0], [10, height]])\n                    .on(\"start\", brush)\n                    .on(\"brush\", brush)\n                    .on(\"end\", brush)\n                )\n            })\n            .selectAll(\"rect\")\n            .attr(\"x\", -8)\n            .attr(\"width\", 16);\n\n        var selections = new Map()\n\n        function brush({selection}, key) {\n            if(selection === null) selections.delete(key);\n            else selections.set(key, selection.map(scales[key].invert));\n            const selected = [];\n            foreground.each(function(d) {\n                var active = Array.from(selections).every(([key, [max, min]]) => d[key] >= min && d[key] <= max);\n                d3.select(this).style(\"stroke\", active ? \"green\" : \"blue\");\n                if(active) {\n                    d3.select(this).raise();\n                    selected.push(d);\n                }\n            });\n        }\n\n        // Reordering for axes\n        var dragging = {};\n        function position(d) {\n            var v = dragging[d];\n            return v == null ? xScale(d) : v;\n        }\n        axes.call(d3.drag()\n            .on(\"start\", function(event, d) {\n                if(event.y > margin.top) {\n                    return;\n                }\n                dragging[d] = this.__origin__ = xScale(d);\n                this.__dragged__ = false;\n            })\n            .on(\"drag\", function(event, d) {\n                if(!this.__origin__) {\n                    return;\n                }\n                dragging[d] = Math.min(width, Math.max(0, this.__origin__ += event.dx));\n                dimensions.sort(function(a, b) { return position(a) - position(b); });\n                xScale.domain(dimensions);\n                axes.attr(\"transform\", function(d) { return \"translate(\" + position(d) + \")\"; });\n                this.__dragged__ = true;\n            })\n            .on(\"end\", function(event, d) {\n                if(!this.__dragged__) {\n                    // no movement\n                } else {\n                    //reorder\n                    d3.select(this).transition().attr(\"transform\", \"translate(\"+xScale(d) + \")\");\n                    // TODO: Add brush\n                }\n                xScale.domain(dimensions);\n                delete this.__dragged__;\n                delete this.__origin__;\n                delete dragging[d];\n            }))\n\n        var values = [];\n        props.data.map(function(d) {\n            for(let i = 0; i < d.values.length; i++) {\n                if(values.length < d.values.length) {\n                    values.push({});\n                    values[i][d.label] = d.values[i];\n                }\n                else {\n                    values[i][d.label] = d.values[i];\n                }\n            }\n        });\n\n        var foreground = this.svg.append(\"g\")\n            .selectAll(\"path\")\n            .data(values)\n            .enter().append(\"path\")\n            .attr(\"d\", path)\n            .style(\"fill\", \"none\")\n            .style(\"stroke\", \"#005454\")\n            .style(\"opacity\", 0.5)\n\n        // Returns the path for a given data point.\n        function path(d) {\n          return d3.line()(dimensions.map(function(p) { return [xScale(p), scales[p](d[p])]; }));\n        }\n    }\n\n    update(props) {\n\n    }\n}\n\n"],"sourceRoot":""}