{"version":3,"sources":["webpack:///./src/lib/components/FancyParallelCoordinatesD3.js"],"names":["FancyParallelCoordinatesD3","el","props","update","bind","margin","top","right","bottom","left","width","height","dimensions","data","map","label","d3","append","attr","svg","scales","i","length","domain","range","foreground","document","getElementById","getContext","globalCompositeOperation","strokeStyle","lineWidth","fillText","xScale","padding","selectAll","enter","d","each","call","scale","style","text","paths","path","ctx","beginPath","x0","y0","values","moveTo","p","x","y","cp1x","cp1y","cp2x","cp2y","bezierCurveTo","lineTo","stroke","render_range","selection","max","opacity","slice","forEach","selected","count","n","Math","pow","timer","Date","getTime","animloop","render_speed","optimize"],"mappings":"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","file":"45c289e-main-wps-hmr.js","sourcesContent":["import * as d3 from 'd3'\n\nexport default class FancyParallelCoordinatesD3 {\n    constructor(el, props) {\n        this.update = this.update.bind(this);\n\n        var margin = {top: 30, right: 100, bottom: 50, left: 50}, width = props.width - margin.left - margin.right,\n            height = props.height - margin.top - margin.bottom;\n\n        var dimensions = props.data.map(({label}) => label);\n\n        d3.select(el).append('canvas')\n            .attr('id', 'foreground');\n\n        this.svg = d3.select(el).append('svg')\n            .attr('width', width + margin.left + margin.right)\n            .attr('height', height + margin.top + margin.bottom)\n            .append('g')\n            .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n        // Create axes for data\n        var scales = {}\n        for(let i = 0; i < dimensions.length; i++) {\n            scales[dimensions[i]] = d3.scaleLinear()\n                .domain(props.data[i].range)\n                .range([height, 0])\n        }\n\n        // Foreground canvas for primary view\n        var foreground = document.getElementById('foreground').getContext('2d');\n        foreground.globalCompositeOperation = 'destination-over';\n        foreground.strokeStyle = \"rgba(0, 100, 160, 0.8)\";\n        foreground.lineWidth = 1.7;\n        foreground.fillText(\"Loading...\", width/2, height/2)\n\n        // Create x-axes to lay out the y-axes\n        var xScale = d3.scalePoint()\n            .range([0, width])\n            .padding(1)\n            .domain(dimensions);\n\n        // Draw the axes\n        this.svg.selectAll(\"myAxis\")\n            .data(dimensions).enter()\n            .append('g')\n            // move to right position\n            .attr(\"transform\", function(d) {return \"translate(\" + xScale(d) + \")\";})\n            // build axes\n            .each(function(d) {d3.select(this).call(d3.axisLeft().scale(scales[d]));})\n            // add title\n            .append(\"text\")\n            .style(\"text-anchor\", \"middle\")\n            .attr(\"y\", -9)\n            .text(function(d) {return d;})\n            .style(\"fill\", \"black\");\n\n        // render lines\n        paths(props.data, foreground);\n    }\n\n    update(props) {\n\n    }\n}\n\n// Draw a single polyline\nfunction path(d, ctx) {\n    ctx.beginPath();\n    var x0 = xScale(0)-15,\n        y0 = scales[dimensions[0]](d[0].values); // left edge\n    ctx.moveTo(x0, y0);\n    dimensions.map(function(p, i) {\n        var x = xScale(p),\n            y = scales[p](d[i].values);\n        var cp1x = x - 0.88*(x-x0);\n        var cp1y = y0;\n        var cp2x = x - 0.12*(x-x0);\n        var cp2y = y;\n        ctx.bezierCurveTo(cp1x, cp1y, cp2y, cp2y, x, y);\n        x0 = x;\n        y0 = y;\n    });\n    ctx.lineTo(x0+15, y0);  // right edge\n    ctx.stroke();\n}\n\n// render polylines i to i+render_speed\nfunction render_range(selection, i, max, opacity) {\n    selection.slice(i, max).forEach(function(d) {\n        path(d, foreground);\n    });\n}\n\n// render a set of polylines\nfunction paths(selected, ctx, count) {\n    var n = selected.length,\n        i = 0,\n        opacity = d3.min([2 / Math.pow(n, 0.3), 1]),\n        timer = (new Date()).getTime();\n\n    // render all lines until finished\n    function animloop() {\n        if (i >= n) return true;\n        var max = d3.min([i + render_speed, n]);\n        render_range(selected, i, max, opacity);\n        i = max;\n        timer = optimize(timer); // adjusts render_speed\n    }\n\n    d3.timer(animloop());\n}"],"sourceRoot":""}