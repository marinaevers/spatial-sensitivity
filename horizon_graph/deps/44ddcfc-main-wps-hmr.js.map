{"version":3,"sources":["webpack:///./src/lib/components/HorizonGraph.react.js","webpack:///./src/lib/components/HorizonGraphD3.js"],"names":["HorizonGraph","horizonGraph","HorizonGraphD3","el","props","update","id","Component","defaultProps","width","height","padding","bands","threshold","propTypes","PropTypes","string","setProps","func","number","x","array","isRequired","y","names","console","log","bind","margin","top","right","bottom","left","dataWidth","xDomain","d3","yDomain","xRange","xScale","size","length","yScale","xAxis","uid","Math","random","toString","slice","svg","append","style","g","selectAll","data","join","attr","_","i","curve","area","y0","y1","defs","I","colors","max","URL","location","d","Array","fill","text","name"],"mappings":"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","file":"44ddcfc-main-wps-hmr.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport HorizonGraphD3 from \"./HorizonGraphD3\";\n\n/**\n * ExampleComponent is an example component.\n * It takes a property, `label`, and\n * displays it.\n * It renders an input with the property `value`\n * which is editable by the user.\n */\nexport default class HorizonGraph extends Component {\n    componentDidMount() {\n        this.horizonGraph = new HorizonGraphD3(this.el, this.props);\n    }\n\n    componentDidUpdate() {\n        this.horizonGraph.update(this.props);\n    }\n\n    render() {\n        return <div id={this.props.id} ref={el => {this.el = el}} />;\n    }\n}\n\nHorizonGraph.defaultProps = {\n    width: 800,\n    height: 400,\n    padding: 1,\n    bands: 2,\n    threshold: 1\n};\n\nHorizonGraph.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    x: PropTypes.array.isRequired,\n    y: PropTypes.array.isRequired,\n    names: PropTypes.array,\n    padding: PropTypes.number, // separation between adjacent horizons\n    bands: PropTypes.number,\n    threshold: PropTypes.number\n};\n","import * as d3 from 'd3'\n\nexport default class HorizonGraphD3 {\n    constructor(el, props) {\n        console.log(\"Constructor\");\n        this.update = this.update.bind(this);\n\n        var margin = {top: 30, right: 100, bottom: 50, left: 50}, width = props.dataWidth - margin.left - margin.right,\n            height = props.height - margin.top - margin.bottom;\n\n        // Construct scales and axes\n        const xDomain = d3.extent(props.x);\n        const yDomain = [0, d3.max(props.y)];\n        const xRange = [margin.left, width - margin.right];\n        const xScale = d3.scaleLinear(xDomain, xRange);\n        const size = height/props.names.length;\n        const yScale = d3.scaleLinear(yDomain, [size, size - props.bands * (size - props.padding)]);\n        const xAxis = d3.axisBottom(xScale);\n\n        // A unique identifier for clip paths (to avoid conflicts).\n        const uid = `O-${Math.random().toString(16).slice(2)}`;\n\n        console.log(el);\n\n        this.svg = d3.select(el).append(\"svg\")\n            .style(\"width\", width)\n            .style(\"height\", height)\n\n        const g = svg.selectAll(\"g\")\n            .data(names)\n            .join(\"g\")\n            .attr(\"transform\", (_, i) => 'translate(0, ${i*size + marginTop})');\n\n        // Construct an area generator\n        const curve = d3.curveLinear\n        const area = d3.area()\n            .curve(curve)\n            .x(i => xScale(props.x))\n            .y0(yScale(0))\n            .y1(i => yScale(props.y[i]));\n\n        const defs = g.append(\"defs\");\n\n        defs.append(\"clipPath\")\n            .attr(\"id\", (_, i) => `${uid}-clip-${i}`)\n            .append(\"rect\")\n            .attr(\"y\", padding)\n            .attr(\"width\", width)\n            .attr(\"height\", size - props.padding);\n\n        defs.append(\"path\")\n            .attr(\"id\", (_, i) => `${uid}-path-${i}`)\n            .attr(\"d\", ([, I]) => area(I));\n\n        const colors = d3.schemeGreys[Math.max(3, props.bands)];\n\n        g\n            .attr(\"clip-path\", (_, i) => `url(${new URL(`#${uid}-clip-${i}`, location)})`)\n            .selectAll(\"use\")\n            .data((d, i) => new Array(props.bands).fill(i))\n            .join(\"use\")\n            .attr(\"fill\", (_, i) => colors[i + Math.max(0, 3 - props.bands)])\n            .attr(\"transform\", (_, i) => `translate(0,${i * size})`)\n            .attr(\"xlink:href\", (i) => `${new URL(`#${uid}-path-${i}`, location)}`);\n\n        g.append(\"text\")\n            .attr(\"x\", margin.left)\n            .attr(\"y\", (size + props.padding) / 2)\n            .attr(\"dy\", \"0.35em\")\n            .text(([name]) => name);\n    }\n\n    update(props) {\n\n    }\n}"],"sourceRoot":""}